---
import Image from "astro/components/Image.astro";

const { ...props } = Astro.props;
---
<Image
  id={"thumbnail-" + props.index}
  data-image={props.index}
  src={props.src}
  alt={props.alt}
  width={props.width}
  height={props.height}
  class={props.class + " gallery-image"}
/>
<script>
  const gallery = document.getElementById("gallery");
  const galleryImages = document.getElementsByClassName("gallery-image");
  Array.from(galleryImages).forEach((galleryImage, index) => {
    galleryImage.addEventListener("click", () => open(index));
  });

  function open(index) {
    gallery.classList.remove("hidden");
    const images = document.getElementById("images");
    images.style.scrollBehavior = "auto";
    images.scrollLeft = index * images.clientWidth;
    images.style.scrollBehavior = "";
  }
</script>